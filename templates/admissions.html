<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admissions - Bookland Schools</title>

  <!-- Favicons -->
  <link href="assets/img/school_logo.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Raleway:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Vendor CSS -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <!-- Main CSS -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- ✅ Global API URL -->
  <script>
      const API_BASE_URL = "https://booklandbackend.onrender.com";
  </script>
</head>
<body class="admissions-page">

  <!-- Header -->
  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">
      <a href="/" class="logo d-flex align-items-center">
        <img src="assets/img/school_logo.png" alt="Logo">
        <h1 class="sitename">Bookland <br>Schools</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/about">About Us</a></li>
          <li><a href="/admissions" class="active">Admission</a></li>
          <li><a href="/fees">Fees</a></li>
          <li><a href="/alumni">Alumni</a></li>
          <li><a href="/events">Events</a></li>
          <li><a href="/contact">Contact</a></li>
          <li><a href="/faqs">FAQs</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main class="main">

    <!-- Page Title -->
    <div class="page-title dark-background" style="background-image: url('assets/img/education/showcase-1.webp');">
      <div class="container position-relative">
        <h1>Admissions</h1>
        <p>We welcome learners into a nurturing environment that prioritizes academic growth,
          character development, and holistic learning.</p>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="/">Home</a></li>
            <li class="current">Admissions</li>
          </ol>
        </nav>
      </div>
    </div>

    <!-- Admissions Section -->
    <section id="admissions" class="admissions section">
      <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row gy-5 g-lg-5">

          <!-- Left Column: Info, Steps, Deadlines -->
          <div class="col-lg-6">
            <div class="admissions-info" data-aos="fade-up">
              <h2>Begin Your Academic Journey Today</h2>
              <p>Join a vibrant community where learning, growth, and values go hand in hand.</p>

              <!-- How to Apply -->
              <div class="admissions-steps mt-5">
                <h3>How to Apply</h3>
                <div class="steps-wrapper mt-4" id="admission-steps">
                  <!-- Steps will load dynamically via JS -->
                </div>
              </div>

              <!-- Key Deadlines -->
              <div class="deadlines mt-5" data-aos="fade-up">
                <h3>Key Admission Deadlines</h3>
                <div class="deadline-grid mt-4" id="admission-deadlines">
                  <!-- Deadlines will load dynamically via JS -->
                </div>
              </div>
            </div>
          </div>

          <!-- Right Column: Requirements and Form -->
          <div class="col-lg-6">

            <!-- Admission Requirements -->
            <div class="admissions-requirements" data-aos="fade-up">
              <h3>Admission Requirements</h3>
              <div class="requirements-list mt-4" id="admission-requirements">
                <!-- Requirements will load dynamically via JS -->
              </div>
            </div>

            <!-- Request Information Form -->
            <div class="request-info mt-5" data-aos="fade-up">
              <div class="card">
                <div class="card-body">
                  <h3 class="card-title">Request Information</h3>
                  <form class="contact-form mt-4" action="/admissions/" method="post">
                    {% csrf_token %}
                    <div class="mb-3">
                      <label for="name" class="form-label">Full Name</label>
                      <input type="text" id="name" name="name" class="form-control" placeholder="Full Name" required>
                    </div>
                    <div class="mb-3">
                      <label for="email" class="form-label">Email Address</label>
                      <input type="email" id="email" name="email" class="form-control" placeholder="Email Address" required>
                    </div>
                    <div class="mb-3">
                      <label for="phone" class="form-label">Phone Number</label>
                      <input type="tel" id="phone" name="phone" class="form-control" placeholder="Phone Number">
                    </div>
                    <div class="mb-3">
                      <label for="message" class="form-label">Questions or Comments</label>
                      <textarea id="message" name="message" class="form-control" rows="3" placeholder="Questions or Comments" required></textarea>
                    </div>
                    <div class="text-center">
                      <button type="submit" class="btn btn-primary">Submit Request</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer id="footer" class="footer position-relative dark-background">
    <div class="container text-center mt-4">
      <p>© <span id="current-year"></span> Bookland Schools. All rights reserved.</p>
      <div>Designed by <strong>Charles Jeckton</strong></div>
    </div>
  </footer>

  <!-- Vendor JS -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>

  <!-- Main JS -->
  <script src="assets/js/main.js"></script>

  <!-- ========================= -->
  <!-- API FETCH LOGIC -->
  <!-- ========================= -->
  <script>
    document.getElementById('current-year').textContent = new Date().getFullYear();

    // Fetch admission steps
    fetch(`${API_BASE_URL}/api/admission-steps/`)
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('admission-steps');
        data.forEach((step, idx) => {
          const div = document.createElement('div');
          div.className = 'step-item';
          div.dataset.aos = 'fade-up';
          div.dataset.aosDelay = `${idx}00`;
          div.innerHTML = `
            <div class="step-number">${idx + 1}</div>
            <div class="step-content">
              <h4>${step.title}</h4>
              <p>${step.description}</p>
            </div>
          `;
          container.appendChild(div);
        });
      });

    // Fetch key admission deadlines
    fetch(`${API_BASE_URL}/api/admission-deadlines/`)
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('admission-deadlines');
        data.forEach(deadline => {
          const div = document.createElement('div');
          div.className = 'deadline-item';
          div.innerHTML = `
            <h4>${deadline.name}</h4>
            <div class="date">${new Date(deadline.deadline_date).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}</div>
          `;
          container.appendChild(div);
        });
      });

    // Fetch admission requirements (optional)
    fetch(`${API_BASE_URL}/api/admission-requirements/`)
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('admission-requirements');
        data.forEach((req, idx) => {
          const div = document.createElement('div');
          div.className = 'requirement-item';
          div.dataset.aos = 'fade-up';
          div.dataset.aosDelay = `${idx}00`;
          div.innerHTML = `
            <div class="icon-box"><i class="${req.icon}"></i></div>
            <div><h4>${req.title}</h4><p>${req.description}</p></div>
          `;
          container.appendChild(div);
        });
      });
  </script>
</body>
</html>
